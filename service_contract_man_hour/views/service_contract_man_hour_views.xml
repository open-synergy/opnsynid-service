<?xml version="1.0" encoding="utf-8" ?>
<!-- Copyright 2020 OpenSynergy Indonesia
     Copyright 2020 PT. Simetri Sinergi Indonesia
     License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl). -->
<openerp>
<data>
<record id="service_contract_man_hour_view_search" model="ir.ui.view">
    <field name="name">service.contract_man_hour form</field>
    <field name="model">service.contract_man_hour</field>
    <field name="arch" type="xml">
        <search>
            <field name="type_id" />
            <field name="partner_id" />
            <field name="responsible_id" />
            <field name="contract_id" />
            <group name="dom_contract_state" string="Contract State">
                <filter
                            name="dom_contract_draft"
                            string="Draft"
                            domain="[('contract_state','=','draft')]"
                        />
                <filter
                            name="dom_contract_confirm"
                            string="Waiting for Approval"
                            domain="[('contract_state','=','confirm')]"
                        />
                <filter
                            name="dom_contract_approve"
                            string="Ready To Start"
                            domain="[('contract_state','=','approve')]"
                        />
                <filter
                            name="dom_contract_open"
                            string="In Progress"
                            domain="[('contract_state','=','open')]"
                        />
                <filter
                            name="dom_contract_done"
                            string="Done"
                            domain="[('contract_state','=','done')]"
                        />
                <filter
                            name="dom_contract_cancel"
                            string="Cancel"
                            domain="[('contract_state','=','cancel')]"
                        />
                <filter
                            name="dom_contract_terminate"
                            string="Terminate"
                            domain="[('contract_state','=','terminate')]"
                        />
            </group>
            <group name="dom_invoice_state" string="Invoice State">
                <filter
                            name="dom_tobeinvoiced"
                            string="To Be Invoiced"
                            domain="[('invoice_state','=','tobeinvoiced')]"
                        />
                <filter
                            name="dom_invoiced"
                            string="Invoiced"
                            domain="[('invoice_state','=','invoiced')]"
                        />
            </group>
            <group name="group" string="Group By">
                <filter
                            name="grp_contract"
                            string="# Contract"
                            context="{'group_by':'contract_id'}"
                        />
                <filter
                            name="grp_partner"
                            string="Customer"
                            context="{'group_by':'partner_id'}"
                        />
                <filter
                            name="grp_type"
                            string="Type"
                            context="{'group_by':'type_id'}"
                        />
                <filter
                            name="grp_responsible"
                            string="Responsible"
                            context="{'group_by':'responsible_id'}"
                        />
                <filter
                            name="grp_invoice_state"
                            string="Invoice State"
                            context="{'group_by':'invoice_state'}"
                        />
            </group>
        </search>
    </field>
</record>

<record id="service_contract_man_hour_view_tree" model="ir.ui.view">
    <field name="name">service.contract_man_hour tree</field>
    <field name="model">service.contract_man_hour</field>
    <field name="arch" type="xml">
        <tree create="false" edit="false" delete="false">
            <field name="contract_id" />
            <field name="partner_id" />
            <field name="type_id" />
            <field name="responsible_id" />
            <field name="analytic_account_id" />
            <field name="prepaid_total" widget="float_time" />
            <field name="prepaid_usage" widget="float_time" />
            <field name="prepaid_diff" widget="float_time" />
            <field name="contract_state" />
            <field name="invoice_state" />
            <button
                        name="action_create_invoice"
                        string="Create Invoice"
                        type="object"
                        icon="gtk-execute"
                        attrs="{'invisible':[('invoice_state','=','invoiced')]}"
                    />
            <button
                        name="action_delete_invoice"
                        string="Delete Invoice"
                        type="object"
                        icon="gtk-cancel"
                        attrs="{'invisible':[('invoice_state','=','tobeinvoiced')]}"
                    />
        </tree>
    </field>
</record>

<record id="service_contract_man_hour_action" model="ir.actions.act_window">
    <field name="name">Man Hours</field>
    <field name="type">ir.actions.act_window</field>
    <field name="res_model">service.contract_man_hour</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree</field>
    <field name="context">{}</field>
</record>

<menuitem
            id="service_contract_man_hour_menu"
            name="Man Hours"
            parent="service_contract.service_contract_root_menu"
            action="service_contract_man_hour_action"
            sequence="10"
        />
</data>
</openerp>
